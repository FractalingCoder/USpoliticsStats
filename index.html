<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Congress Seats — Liquid Glass</title>
  <style>
    :root{
      --bg0:#f6f7fb;
      --bg1:#ffffff;
      --glass: rgba(255,255,255,.55);
      --glass2: rgba(255,255,255,.35);
      --stroke: rgba(20,20,30,.08);
      --shadow: 0 30px 80px rgba(10, 12, 20, .12);
      --shadow2: 0 12px 30px rgba(10, 12, 20, .10);
      --text:#0b1020;
      --muted: rgba(11,16,32,.60);

      --blue:#2f6bff;
      --red:#ff3b3b;
      --yellow:#ffcc33;
      --green:#28d17c;
      --purple:#a855f7;
      --gray:#c9cedc;

      --ring-bg: rgba(14, 20, 40, .10);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      min-height:100vh;
      background:
        radial-gradient(1200px 700px at 20% 0%, rgba(47,107,255,.16), transparent 55%),
        radial-gradient(900px 600px at 90% 10%, rgba(168,85,247,.12), transparent 55%),
        radial-gradient(800px 600px at 50% 100%, rgba(40,209,124,.10), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }

    .wrap{
      max-width: 1100px;
      margin: 0 auto;
      padding: 28px 18px 48px;
    }

    header{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:16px;
      margin-bottom: 18px;
    }

    .title{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    h1{
      margin:0;
      font-size: clamp(20px, 2.6vw, 30px);
      letter-spacing: -0.02em;
      line-height:1.15;
    }
    .sub{
      margin:0;
      color:var(--muted);
      font-size: 13px;
    }

    /* Liquid glass card */
    .glass{
      position:relative;
      border-radius: 22px;
      padding: 18px;
      background: linear-gradient(135deg, var(--glass), var(--glass2));
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow2);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      overflow:hidden;
    }
    .glass::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(600px 180px at 20% 10%, rgba(255,255,255,.65), transparent 60%),
        radial-gradient(500px 240px at 80% 30%, rgba(255,255,255,.45), transparent 60%),
        radial-gradient(420px 220px at 40% 110%, rgba(255,255,255,.30), transparent 60%);
      pointer-events:none;
      mix-blend-mode: overlay;
      opacity:.75;
    }

    .controls{
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:flex-end;
      flex-wrap:wrap;
    }

    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.55);
      border: 1px solid var(--stroke);
      box-shadow: 0 10px 25px rgba(10,12,20,.08);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      font-size: 13px;
      color: var(--muted);
    }
    .chip strong{color:var(--text); font-weight:650}

    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 14px;
      margin-top: 14px;
    }

    .card{
      grid-column: span 6;
      min-height: 300px;
    }

    @media (max-width: 860px){
      .card{grid-column: span 12;}
      header{align-items:flex-start; flex-direction:column;}
      .controls{justify-content:flex-start;}
    }

    .cardTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 10px;
      position:relative;
      z-index:1;
    }
    .cardTop h2{
      margin:0;
      font-size: 16px;
      letter-spacing: -0.01em;
    }
    .pill{
      font-size: 12px;
      color: var(--muted);
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.55);
      border: 1px solid var(--stroke);
    }

    /* Donut */
    .donutWrap{
      display:grid;
      grid-template-columns: 320px 1fr;
      gap: 16px;
      align-items:center;
      position:relative;
      z-index:1;
    }
    @media (max-width: 600px){
      .donutWrap{grid-template-columns: 1fr; justify-items:center;}
    }

    .donut{
      width: 320px;
      height: 320px;
      position:relative;
      display:grid;
      place-items:center;
    }
    .donut svg{
      width: 100%;
      height: 100%;
      transform: rotate(-90deg); /* start at top */
      filter: drop-shadow(0 18px 30px rgba(10,12,20,.12));
    }

    .center{
      position:absolute;
      inset: 52px;
      border-radius: 999px;
      background: rgba(255,255,255,.62);
      border: 1px solid var(--stroke);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.55), 0 10px 30px rgba(10,12,20,.10);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding: 16px;
    }
    .center .big{
      font-size: 34px;
      font-weight: 750;
      letter-spacing:-0.03em;
      line-height:1.05;
      margin-bottom: 8px;
    }
    .center .small{
      color:var(--muted);
      font-size: 13px;
      line-height:1.3;
    }

    /* Legend */
    .legend{
      display:flex;
      flex-direction:column;
      gap: 10px;
      padding-right: 6px;
    }
    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 10px 12px;
      border-radius: 16px;
      background: rgba(255,255,255,.50);
      border: 1px solid var(--stroke);
    }
    .left{
      display:flex;
      align-items:center;
      gap:10px;
      min-width: 0;
    }
    .dot{
      width: 10px; height: 10px;
      border-radius:999px;
      box-shadow: 0 6px 16px rgba(10,12,20,.15);
      flex: 0 0 auto;
    }
    .name{
      font-size: 13px;
      color: var(--text);
      font-weight: 650;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .val{
      font-variant-numeric: tabular-nums;
      font-size: 13px;
      color: var(--muted);
      white-space: nowrap;
    }

    /* Range slider (glass) */
    .sliderBox{
      grid-column: span 12;
      padding: 16px 18px;
    }
    .rangeLine{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
      margin-bottom: 10px;
      position:relative;
      z-index:1;
    }
    .rangeLine .label{
      font-size: 13px;
      color: var(--muted);
    }
    .rangeLine .label strong{color:var(--text)}
    input[type="range"]{
      width:100%;
      -webkit-appearance:none;
      appearance:none;
      height: 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.55);
      border: 1px solid var(--stroke);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.55);
      outline:none;
      position:relative;
      z-index:1;
    }
    input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none;
      appearance:none;
      width: 26px;
      height: 26px;
      border-radius: 999px;
      background: linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.55));
      border: 1px solid var(--stroke);
      box-shadow: 0 16px 30px rgba(10,12,20,.16);
      cursor:pointer;
    }
    input[type="range"]::-moz-range-thumb{
      width: 26px; height: 26px; border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.55));
      border: 1px solid var(--stroke);
      box-shadow: 0 16px 30px rgba(10,12,20,.16);
      cursor:pointer;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="title">
        <h1>Congress Seats</h1>
        <p class="sub">Liquid glass donut charts — split by party share</p>
      </div>

      <div class="controls">
        <div class="chip">Mode: <strong>Monthly</strong></div>
        <div class="chip">Theme: <strong>White Glass</strong></div>
      </div>
    </header>

    <div class="grid">
      <!-- Slider (month-by-month index) -->
      <section class="glass sliderBox">
        <div class="rangeLine">
          <div class="label">Snapshot: <strong id="snapshotLabel">Example Month</strong></div>
          <div class="label"><span id="monthIndexLabel">#0</span></div>
        </div>
        <input id="monthSlider" type="range" min="0" max="0" step="1" value="0" />
      </section>

      <!-- House -->
      <section class="glass card" id="houseCard">
        <div class="cardTop">
          <h2>House</h2>
          <div class="pill"><span id="houseTotal">435</span> seats</div>
        </div>

        <div class="donutWrap">
          <div class="donut">
            <svg viewBox="0 0 120 120" aria-label="House donut" role="img">
              <!-- background ring -->
              <circle cx="60" cy="60" r="46" fill="none" stroke="var(--ring-bg)" stroke-width="12" />
              <!-- segments injected here -->
              <g id="houseSegments"></g>
            </svg>

            <div class="center">
              <div class="big" id="houseCenterMain">—</div>
              <div class="small" id="houseCenterSub">—</div>
            </div>
          </div>

          <div class="legend" id="houseLegend"></div>
        </div>
      </section>

      <!-- Senate -->
      <section class="glass card" id="senateCard">
        <div class="cardTop">
          <h2>Senate</h2>
          <div class="pill"><span id="senateTotal">100</span> seats</div>
        </div>

        <div class="donutWrap">
          <div class="donut">
            <svg viewBox="0 0 120 120" aria-label="Senate donut" role="img">
              <circle cx="60" cy="60" r="46" fill="none" stroke="var(--ring-bg)" stroke-width="12" />
              <g id="senateSegments"></g>
            </svg>

            <div class="center">
              <div class="big" id="senateCenterMain">—</div>
              <div class="small" id="senateCenterSub">—</div>
            </div>
          </div>

          <div class="legend" id="senateLegend"></div>
        </div>
      </section>
    </div>
  </div>

  <script>
    // ---------- Demo monthly snapshots ----------
    // Replace this with your real month-by-month dataset (1900 -> now).
    // Each snapshot: { label, house: {total, parties:[{name,color, seats}]}, senate:{...} }
    const SNAPSHOTS = [
      {
        label: "Example: Nov 2024",
        house: { total: 435, parties: [
          { name: "Democrats",  color: "var(--blue)",   seats: 187 },
          { name: "Republicans",color: "var(--red)",    seats: 245 },
          { name: "Other",      color: "var(--yellow)", seats: 3   },
        ]},
        senate: { total: 100, parties: [
          { name: "Democrats",  color: "var(--blue)",   seats: 51 },
          { name: "Republicans",color: "var(--red)",    seats: 49 },
        ]}
      },
      {
        label: "Example: Jan 2025",
        house: { total: 435, parties: [
          { name: "Democrats",  color: "var(--blue)",   seats: 190 },
          { name: "Republicans",color: "var(--red)",    seats: 242 },
          { name: "Other",      color: "var(--yellow)", seats: 3   },
        ]},
        senate: { total: 100, parties: [
          { name: "Democrats",  color: "var(--blue)",   seats: 50 },
          { name: "Republicans",color: "var(--red)",    seats: 50 },
        ]}
      },
    ];

    // ---------- Donut rendering (SVG stroke-dasharray) ----------
    // We draw each segment as a circle with stroke-dasharray and stroke-dashoffset.
    // This supports clean, glassy arcs without heavy canvas code.
    function renderDonut({ segmentsEl, legendEl, centerMainEl, centerSubEl, data }) {
      segmentsEl.innerHTML = "";
      legendEl.innerHTML = "";

      const total = data.total;
      const parties = data.parties
        .filter(p => p.seats > 0)
        .map(p => ({ ...p, pct: (p.seats / total) * 100 }));

      // Center text: show largest party + breakdown line
      const sorted = [...parties].sort((a,b)=>b.seats-a.seats);
      const top = sorted[0];
      const topPct = top ? top.pct : 0;

      centerMainEl.textContent = top ? `${Math.round(topPct)}%` : "—";
      centerSubEl.textContent = top ? `${top.name} • ${top.seats}/${total}` : "—";

      // SVG circle constants
      const r = 46;
      const C = 2 * Math.PI * r;

      // Starting offset at 0 (svg group already rotated -90deg in CSS)
      let used = 0;

      // Small gap between segments for readability (in "length" along circumference)
      const gap = 2.2; // tweak for your taste
      const gapTotal = gap * parties.length;
      const usable = Math.max(C - gapTotal, 0);

      parties.forEach((p, idx) => {
        const segLen = (p.seats / total) * usable;

        // Circle segment
        const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        circle.setAttribute("cx", "60");
        circle.setAttribute("cy", "60");
        circle.setAttribute("r", String(r));
        circle.setAttribute("fill", "none");
        circle.setAttribute("stroke", p.color);
        circle.setAttribute("stroke-width", "12");
        circle.setAttribute("stroke-linecap", "round");

        // dasharray: visible segLen then rest
        circle.setAttribute("stroke-dasharray", `${segLen} ${C - segLen}`);
        // dashoffset: move segment to correct place
        circle.setAttribute("stroke-dashoffset", String(-(used)));

        // subtle glass highlight on each arc (optional)
        circle.style.opacity = "0.98";

        segmentsEl.appendChild(circle);

        used += segLen + gap;

        // Legend row
        const row = document.createElement("div");
        row.className = "row";
        row.innerHTML = `
          <div class="left">
            <span class="dot" style="background:${p.color}"></span>
            <span class="name">${p.name}</span>
          </div>
          <div class="val">${p.seats} • ${p.pct.toFixed(1)}%</div>
        `;
        legendEl.appendChild(row);
      });
    }

    function setSnapshot(index){
      const snap = SNAPSHOTS[index];

      document.getElementById("snapshotLabel").textContent = snap.label;
      document.getElementById("monthIndexLabel").textContent = `#${index}`;

      // House
      document.getElementById("houseTotal").textContent = snap.house.total;
      renderDonut({
        segmentsEl: document.getElementById("houseSegments"),
        legendEl: document.getElementById("houseLegend"),
        centerMainEl: document.getElementById("houseCenterMain"),
        centerSubEl: document.getElementById("houseCenterSub"),
        data: snap.house
      });

      // Senate
      document.getElementById("senateTotal").textContent = snap.senate.total;
      renderDonut({
        segmentsEl: document.getElementById("senateSegments"),
        legendEl: document.getElementById("senateLegend"),
        centerMainEl: document.getElementById("senateCenterMain"),
        centerSubEl: document.getElementById("senateCenterSub"),
        data: snap.senate
      });
    }

    // Slider setup
    const slider = document.getElementById("monthSlider");
    slider.max = String(SNAPSHOTS.length - 1);
    slider.value = "0";
    slider.addEventListener("input", () => setSnapshot(Number(slider.value)));

    // Init
    setSnapshot(0);
  </script>
</body>
</html>
